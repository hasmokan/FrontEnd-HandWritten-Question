<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>find</title>
</head>

<body>

</body>

<script>
  let rains = [1, 2, 0, 0, 2, 1]

  /**
 * @param {number[]} rains
 * @return {number[]}
 */
  var avoidFlood = function (rains) {
    let map = new Map()
    let ans = new Array(rains.length).fill(1)
    let dryDay = []
    for (let i = 0; i < rains.length; i++) {
      if (rains[i] !== 0) {
        if (map.has(rains[i])) {
          let rainDay = map.get(rains[i])
          console.log(rainDay)
          if (dryDay.length === 0) {
            return []
          }
          else {
            let index = dryDay.find(item => item > rainDay)
            console.log(dryDay)
            console.log(index)
            if (index === -1) return []
            ans[dryDay[index]] = rains[i]
            dryDay.splice(index, 1, 1)
          }
        }
        else {
          map.set(rains[i], i)
        }
        ans[i] = -1
      }
      else { // 不下雨,要抽水
        dryDay.push(i)
      }
    }

    return ans
  };

  console.log(avoidFlood(rains))
</script>

</html>